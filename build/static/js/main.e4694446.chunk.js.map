{"version":3,"sources":["components/Join/Join.module.css","components/Messages/Message.module.css","components/Messages/Messages.module.css","components/Chat/Chat.module.css","components/Chat/Chat.js","components/Join/Join.js","components/Messages/Message.js","components/Messages/Messages.js","App.js","index.js"],"names":["module","exports","socket","Join","useState","nameInput","setNameInput","roomChoice","setRoomChoice","isTouched","setIsTouched","nameInputTooShort","trim","length","nameInputClasses","className","classes","htmlFor","type","id","onChange","event","target","value","onFocus","onBlur","name","to","onClick","preventDefault","Message","message","isSentByCurrentUser","trimmedName","toLowerCase","user","text","Messages","messages","useEffect","messageContainer","document","getElementById","scrollTop","scrollHeight","map","index","Chat","location","room","setRoom","setName","setMessage","setMessages","usersPresent","setUsersPresent","ENDPOINT","queryString","parse","search","io","emit","usersInRoom","error","disconnect","off","on","sendMessageHandler","placeholder","onKeyPress","key","App","path","exact","component","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.e4694446.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"join-page\":\"Join_join-page__2YmLo\",\"join-page__heading\":\"Join_join-page__heading__3h6GC\",\"join-page__left-side\":\"Join_join-page__left-side__2HVKs\",\"join-page__right-side\":\"Join_join-page__right-side__2hNRb\",\"join-page__credentials\":\"Join_join-page__credentials__SNQNg\",\"join-page__input-group\":\"Join_join-page__input-group__2myRp\",\"invalid\":\"Join_invalid__3O9Zv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__3cVBO\",\"message__owner\":\"Message_message__owner__Pea1S\",\"message-sender__owner\":\"Message_message-sender__owner__2meLg\",\"message-sender\":\"Message_message-sender__3l_CX\",\"message-text__owner\":\"Message_message-text__owner__118AX\",\"message-text\":\"Message_message-text__26R6R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages-container\":\"Messages_messages-container__2kENy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-page\":\"Chat_chat-page__2b1H-\",\"chat-page__user-list-container\":\"Chat_chat-page__user-list-container__2gaLc\",\"user-list__heading\":\"Chat_user-list__heading__27wXY\",\"chat-container__change-room\":\"Chat_chat-container__change-room__3k7Xb\",\"user-list\":\"Chat_user-list__3hf1i\",\"user-list__user\":\"Chat_user-list__user__1qwec\",\"chat-page__chat-container\":\"Chat_chat-page__chat-container__2NoOT\",\"chat-container__chat-heading\":\"Chat_chat-container__chat-heading__lDGfv\",\"chat-container__chat-output\":\"Chat_chat-container__chat-output__3gnTd\",\"chat-container__input\":\"Chat_chat-container__input__27KAK\"};","import { useState, useEffect } from 'react'\r\nimport queryString from 'query-string'\r\nimport io from 'socket.io-client'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport classes from './Chat.module.css'\r\nimport Messages from '../Messages/Messages'\r\nlet socket \r\n\r\nconst Chat = ({ location }) => {\r\n    const [room, setRoom] = useState('Vermilion')\r\n    const [name, setName] = useState('')\r\n    const [message, setMessage] = useState([])\r\n    const [messages, setMessages] = useState([])\r\n    const [usersPresent, setUsersPresent] = useState([])\r\n    const ENDPOINT = 'https://realtime-peace-chat.herokuapp.com/'\r\n\r\n    // Hook for user connecting or disconnecting\r\n    useEffect(() => {\r\n        const { name, room } = queryString.parse(location.search)\r\n        socket = io(ENDPOINT)\r\n\r\n        setRoom(room)\r\n        setName(name)\r\n\r\n        // New user joins room\r\n        socket.emit('join', { name, room }, (usersInRoom, error) => {\r\n            setUsersPresent(usersInRoom)\r\n        })\r\n\r\n        return () => {\r\n            // User leaves room\r\n            socket.disconnect()\r\n\r\n            socket.off()\r\n        }\r\n    }, [ENDPOINT, location.search])\r\n\r\n\r\n    // Hook for a welcome message\r\n    useEffect(() => {\r\n        socket.on('message', message => {\r\n            setMessages([...messages, message])\r\n        })\r\n    }, [messages])\r\n\r\n    const messageInputHandler = event => {\r\n        setMessage(event.target.value)\r\n    }\r\n\r\n    // Hook for updating the users present in the room list\r\n    useEffect(() => {\r\n        socket.on('user-left', usersInRoom => {\r\n            setUsersPresent(usersInRoom)\r\n        })\r\n\r\n        socket.on('user-joined', usersInRoom => {\r\n            setUsersPresent(usersInRoom)\r\n        })\r\n    }, [usersPresent])\r\n\r\n    // Enter to send message\r\n    const keyPressHandler = event => {\r\n        if(event.key === 'Enter'){\r\n            sendMessageHandler()\r\n        }\r\n    }\r\n\r\n    // Function for sending messages\r\n    const sendMessageHandler = () => {\r\n        if(message) {\r\n            socket.emit('message-sent', message, () => {\r\n                setMessage('')\r\n            })\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className={classes['chat-page']}>\r\n            <div className={classes['chat-page__user-list-container']}>\r\n                <h2 className={classes['user-list__heading']}>Users Present</h2>\r\n                <ul className={classes['user-list']}>\r\n                    {usersPresent.map(user => {\r\n                        return <li className={classes['user-list__user']} key={user.name}>{user.name}</li>\r\n                    })}\r\n                </ul>\r\n            </div>\r\n            <div className={classes['chat-page__chat-container']}>\r\n                <Link to=\"/\">\r\n                    <h2 className={classes['chat-container__change-room']}>Change Room</h2>\r\n                </Link>\r\n                <h2 className={classes['chat-container__chat-heading']}>{room}</h2>\r\n                <div className={classes['chat-container__chat-output']}>\r\n                    <Messages messages={messages} name={name}></Messages>\r\n                </div>\r\n                <div className={classes['chat-container__input']}>\r\n                    <input type=\"text\" placeholder=\"Send a message\" value={message} onChange={messageInputHandler} onKeyPress={keyPressHandler} />\r\n                    <button onClick={sendMessageHandler}>Send</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat","import React, { useState } from 'react'\r\nimport  { Link } from 'react-router-dom'\r\nimport classes from './Join.module.css'\r\n\r\nconst Join = () => {\r\n    const [nameInput, setNameInput] = useState('')\r\n    const [roomChoice, setRoomChoice] = useState('Vermilion')\r\n    const [isTouched, setIsTouched] = useState(false)\r\n\r\n    const usernameChangeHandler = event => {\r\n        setNameInput(event.target.value)\r\n    }\r\n\r\n    const roomChoiceChangeHandler = event => {\r\n        setRoomChoice(event.target.value)\r\n    }\r\n\r\n    const nameInputBlurHandler = () => {\r\n        setIsTouched(true)\r\n    }\r\n\r\n    const clearErrorHandler = () => {\r\n        setIsTouched(false)\r\n    }\r\n\r\n    const enterRoomHandler = event => {\r\n        if(nameInputTooShort) {\r\n            event.preventDefault()\r\n            return\r\n        }\r\n    }\r\n\r\n    const nameInputTooShort = isTouched && nameInput.trim().length < 3\r\n    const nameInputClasses = nameInputTooShort ? 'invalid' : ''\r\n \r\n    return(\r\n        <div className={classes['join-page']}>\r\n            <h1 className={classes['join-page__heading']}>Chat In Peace</h1>\r\n            <div className={classes['join-page__left-side']}>\r\n\r\n            </div>\r\n            <div className={classes['join-page__right-side']}>\r\n                <div className={classes['join-page__credentials']}>\r\n                    <div className={classes['join-page__input-group']}>\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input className={classes[nameInputClasses]} type=\"text\" id=\"username\" onChange={usernameChangeHandler} onFocus={clearErrorHandler} onBlur={nameInputBlurHandler} />\r\n                        {nameInputTooShort && <p>Username must be at least 3 characters long</p>}\r\n                    </div>\r\n                    <div className={classes['join-page__input-group']}>\r\n                        <label htmlFor=\"room\">Choose a room: </label>\r\n                        <select name=\"room\" id=\"room\" onChange={roomChoiceChangeHandler}>\r\n                            <option value=\"vermilion\">Vermilion</option>\r\n                            <option value=\"lavender\">Lavender</option>\r\n                            <option value=\"viridian\">Viridian</option>\r\n                        </select>\r\n                    </div>\r\n                    <Link to={`/chat?name=${nameInput}&room=${roomChoice}`} onClick={enterRoomHandler}> \r\n                        <button>Enter</button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Join","import classes from './Message.module.css'\r\n\r\n\r\n\r\n\r\nconst Message = ({ message, name }) => {\r\n    let isSentByCurrentUser = false\r\n\r\n    const trimmedName = name.trim().toLowerCase()\r\n\r\n    const user = message.user\r\n\r\n    if(user === trimmedName){\r\n        isSentByCurrentUser = true\r\n    }\r\n\r\n    return (\r\n        isSentByCurrentUser ? (\r\n            <div className={classes['message__owner']}>\r\n                <p className={classes['message-sender__owner']}>{trimmedName}</p>\r\n                <p className={classes['message-text__owner']}>{message.text}</p>\r\n            </div>\r\n        ) : (\r\n            <div className={classes['message']}>\r\n                <p className={classes['message-sender']}>{user}</p>\r\n                <p className={classes['message-text']}>{message.text}</p>\r\n            </div>\r\n        )\r\n    )\r\n}\r\n\r\nexport default Message","import classes from './Messages.module.css'\r\n\r\nimport Message from './Message'\r\nimport { useEffect } from 'react'\r\n\r\nconst Messages = ({messages, name}) => {\r\n    useEffect(() => {\r\n        const messageContainer = document.getElementById('message-container')\r\n        messageContainer.scrollTop = messageContainer.scrollHeight\r\n    }, [messages])\r\n\r\n    return (\r\n        <div id=\"message-container\" className={classes['messages-container']}>\r\n            {messages.map((message, index) => {\r\n                return <div key={index}>\r\n                    <Message message={message} name={name}></Message>\r\n                </div>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages","import React from 'react'\r\n\r\nimport { BrowserRouter as Router, Route} from 'react-router-dom'\r\n\r\nimport './App.css'\r\n\r\nimport Join from './components/Join/Join'\r\nimport Chat from './components/Chat/Chat'\r\n\r\nconst App = () => {\r\n    return(\r\n        <Router>\r\n            <Route path=\"/\" exact component={Join}></Route>\r\n            <Route path=\"/chat\" component={Chat}></Route>\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'))"],"sourceRoot":""}